sudo ip netns add hostA
sudo ip netns add hostB
sudo ip netns add router
sudo ip netns exec hostA ip link set lo up
sudo ip netns exec hostB ip link set lo up
sudo ip netns exec router ip link set lo up
sudo ip link add vethA type veth peer name vethAR
sudo ip link add vethB type veth peer name vethBR
sudo ip link set vethA netns hostA
sudo ip link set vethAR netns router
sudo ip link set vethB netns hostB
sudo ip link set vethBR netns router
sudo ip netns exec hostA ip addr add 10.0.1.2/24 dev vethA
sudo ip netns exec router ip addr add 10.0.1.1/24 dev vethAR
sudo ip netns exec hostB ip addr add 10.0.2.2/24 dev vethB
sudo ip netns exec router ip addr add 10.0.2.1/24 dev vethBR
sudo ip netns exec hostA ip link set vethA up
sudo ip netns exec hostB ip link set vethB up
sudo ip netns exec router ip link set vethAR up
sudo ip netns exec router ip link set vethBR up
sudo ip netns exec hostA ping -c 3 10.0.1.1
sudo ip netns exec hostB ping -c 3 10.0.2.1
sudo ip netns exec hostA ip route
sudo ip netns exec hostB ip route
sudo ip netns exec router ip route
sudo ip netns exec router sysctl -w net.ipv4.ip_forward=1
sudo ip netns exec router sysctl net.ipv4.ip_forward
sudo ip netns exec hostA ip route add 10.0.2.0/24 via 10.0.1.1
sudo ip netns exec hostB ip route add 10.0.1.0/24 via 10.0.2.1
sudo ip netns exec hostA ip route
sudo ip netns exec hostB ip route
sudo ip netns exec router ip route
sudo ip netns exec hostA ping -c 4 10.0.2.2
sudo ip netns exec hostB ping -c 4 10.0.1.2
sudo ip netns exec hostA ping -c 4 10.0.2.2
sudo ip netns exec hostA ip route del 10.0.2.0/24 via 10.0.1.1
sudo ip netns exec hostA ping -c 4 10.0.2.2
sudo ip netns exec hostA ip route add 10.0.2.0/24 via 10.0.1.1
sudo ip netns exec hostA ping -c 3 10.0.2.2
sudo ip netns exec router ip link set vethBR down
sudo ip netns exec hostA ping -c 3 10.0.2.2
sudo ip netns exec router ip link set vethBR up
sudo ip netns exec hostA ping -c 3 10.0.2.2
sudo ip netns exec router tcpdump -i vethBR -n
sudo ip netns exec router sysctl -w net.ipv4.ip_forward=0
sudo ip netns exec hostA ping -c 3 10.0.2.2
sudo ip netns exec hostA ping -c 3 10.0.1.1
sudo ip netns exec router sysctl -w net.ipv4.ip_forward=1
sudo ip netns list
ip link
ls
history
history >> Linux_Network.txt